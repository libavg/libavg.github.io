<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.libavg.de/site/projects/libavg/wiki/SponcSupercollider by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Jan 2025 18:11:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>SponcSupercollider - libavg</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="QVLF6cREvlOFkeaPHt4RhwQPDtrjsY3s5ITeOtTQ66Y="/>
<link rel='shortcut icon' href='../../../favicon89c0.ico?1332147363' />
<link href="../../../themes/libavg/stylesheets/applicationb1b8.css?1342212749" media="all" rel="stylesheet" type="text/css" />

<script src="../../../javascripts/prototype89c0.js?1332147363" type="text/javascript"></script>
<script src="../../../javascripts/effects89c0.js?1332147363" type="text/javascript"></script>
<script src="../../../javascripts/dragdrop89c0.js?1332147363" type="text/javascript"></script>
<script src="../../../javascripts/controls89c0.js?1332147363" type="text/javascript"></script>
<script src="../../../javascripts/application89c0.js?1332147363" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>



  
  

  <link href="../../../plugin_assets/redmine_wiki_extensions/stylesheets/wiki_extensions.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../../../plugin_assets/redmine_wiki_extensions/javascripts/wiki_extensions.js" type="text/javascript"></script>
  
    <script src="../../../plugin_assets/redmine_wiki_extensions/javascripts/tablesort.js" type="text/javascript"></script>
    <script type="text/javascript">
      //TableSort.arrowNone = " ";
      TableSort.arrowUp   = ' <img alt="Sort_asc" src="../../../images/sort_asc89c0.png?1332147363" />';
      TableSort.arrowDown = ' <img alt="Sort_desc" src="../../../images/sort_desc89c0.png?1332147363" />';
    </script>
  


<!-- page specific tags -->

  <link href="../../../stylesheets/scm89c0.css?1332147363" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="theme-Libavg controller-wiki action-show">
<div id="wrapper">
<div id="wrapper2">

<div id="header">
    

    

    <h1> <a href="../wiki.html"> <img src="../../../files/libavg_logo.png"/> </a> </h1>

    

    
</div>

<div class="" id="main">
    <div id="sidebar">
        
    <p><a href="WikiStart.html" class="wiki-page">Home</a><br /><a href="../../../../blog/" class="external">Blog</a><br /><a href="DownLoad.html" class="wiki-page">Download</a><br /><a href="FeatureList.html" class="wiki-page">Features</a><br /><a href="Multitouch.html" class="wiki-page">Multitouch</a><br /><a href="Showcase.html" class="wiki-page">Showcase</a></p>


	<a name="Documentation"></a>
<h2 >Documentation<a href="#Documentation" class="wiki-anchor">&para;</a></h2>


	<ul>
	<li><a href="ReleaseInstall.html" class="wiki-page">Installation Guide</a></li>
		<li><a href="ProgrammersGuide.html" class="wiki-page">Programmer's Guide</a></li>
		<li><a href="Firebirds.html" class="wiki-page">Tutorial</a></li>
		<li><a href="Reference.html" class="wiki-page">Reference</a></li>
	</ul>


	<a name="Community"></a>
<h2 >Community<a href="#Community" class="wiki-anchor">&para;</a></h2>


	<ul>
	<li><a href="BugReport.html" class="wiki-page">Reporting Bugs</a></li>
		<li><a href="Contributors.html" class="wiki-page">Contributors</a></li>
	</ul>


	<p><a href="Development.html" class="wiki-page">libavg Development</a></p>


	<p><a href="Imprint_and_Privacy_Policy.html" class="wiki-page">Imprint and Privacy Policy</a></p>
<p>
<br />
<a href="https://github.com/libavg/libavg/">Repository</a> <br />
<a href="https://github.com/libavg/libavg/issues?state=open">Issues</a> <br />
<a href="https://github.com/libavg/libavg/issues/new">New Issue</a><br />
</p>



        
    </div>

    <div id="content">
        
        





<div class="wiki wiki-page">
  <a name="Sponc-Supercollider"></a>
<h1 >Sponc Supercollider<a href="#Sponc-Supercollider" class="wiki-anchor">&para;</a></h1>


	<ul class="toc right"><li><a href="#Sponc-Supercollider">Sponc Supercollider</a></li><li><a href="#Forewords">Forewords</a></li><li><a href="#Prerequisites">Prerequisites</a></li><li><a href="#Download-and-compile-sources">Download and compile sources</a></li><li><a href="#Testing">Testing</a></li><li><a href="#EmacsSClang-test">Emacs+SClang test</a></li><li><a href="#More-tests">More tests</a></li><li><a href="#Avoid-Jack">Avoid Jack</a></li><li><a href="#Final-notes">Final notes</a></li></ul>


	<a name="Forewords"></a>
<h1 >Forewords<a href="#Forewords" class="wiki-anchor">&para;</a></h1>


	<ul>
	<li>For ubuntu, there is a launchpad ppa available: <a class="external" href="https://launchpad.net/~supercollider/+archive/ppa">https://launchpad.net/~supercollider/+archive/ppa</a></li>
		<li>This installation guide has been applied and tested specifically for SuperCollider 3.2 and 3.3 on Ubuntu 8.04.</li>
		<li>The packaged version of SuperCollider for Ubuntu seemed to have unpredictable problems on handling jack outputs.</li>
		<li>Jack framework is probably the best investment over time as it has very flexible methods to change audio topology (mix, split, readdressing), although it seems not so easy to avoid xruns that happen quite often, even with high, RT prio scheduling (and, at least, on ubuntu 8.04 stock + rt kernel). Portaudio in these situations works out of the box and with no tweaking.</li>
	</ul>


	<a name="Prerequisites"></a>
<h1 >Prerequisites<a href="#Prerequisites" class="wiki-anchor">&para;</a></h1>


	<p>For Ubuntu 8.04, copy&#38;paste:</p>


<pre>
$ sudo apt-get install gcc g++ scons libsndfile1-dev libfftw3-dev \
libjack-dev libasound2-dev libavahi-client-dev pkg-config emacs jackd
</pre>

	<p>Recommended package:</p>


<pre>
$ sudo apt-get install qjackctl
</pre>

	<a name="Download-and-compile-sources"></a>
<h1 >Download and compile sources<a href="#Download-and-compile-sources" class="wiki-anchor">&para;</a></h1>


	<p>Download the sources here: <a class="external" href="http://supercollider.sourceforge.net/downloads/">http://supercollider.sourceforge.net/downloads/</a></p>


	<p>Unpack and build:</p>


<pre>
$ cd /path/to/tmp
$ scons build
</pre>

	<p>You should take a look at the build summary, that should be something like this:</p>


<pre>
------------------------------------------------------------------------
 ALTIVEC:                 no
 AUDIOAPI:                Jack
 MIDIAPI:                 ALSA
 DEBUG:                   no
 DEVELOPMENT:             no
 LANG:                    yes
 LID:                     yes
 WII:                     no
 PREFIX:                  /usr/local
 RENDEZVOUS:              yes
 SCEL:                    yes
 SSE:                     yes
 CROSSCOMPILE:            no
 TERMINAL_CLIENT:         yes
 X11:                     yes
------------------------------------------------------------------------
</pre>

	<p>Relevant points are: AUDIOAPI, SCEL (if you want to use Emacs+SCLang). Be sure that AUDIOAPI is "Jack". If you prefer an /opt installation (untested) instead of a <code>/usr/local</code> one, type:</p>


<pre>
$ sudo mkdir /opt/sc
$ scons PREFIX=/opt/sc
</pre>

	<p>At the end of the compilation process, an <em>install</em> can be issued:</p>


<pre>
$ sudo scons install
</pre>

	<p>Note for SC 3.3: for those who hate Emacs and its mindmelter keystrokes, there is a new addition called SCED, which is a plugin for GEdit.</p>


	<a name="Testing"></a>
<h1 >Testing<a href="#Testing" class="wiki-anchor">&para;</a></h1>


	<p>Our interest is on scsynth, located in /usr/local/bin/scsynth (or /opt/sc/bin/scsynth). We're going to test if it boots correctly:</p>


<pre>
$ scsynth -u 57110 -b 1026
</pre>

	<p>You should simply notice this line:</p>


<pre>
SuperCollider 3 server ready..
</pre>

	<p>With a pristine situation, Supercollider won't ask for any jack connection. This can be seen issuing a jack_lsp command, that should report something like this:</p>


<pre>
$ jack_lsp -c
system:capture_1
system:capture_2
system:playback_1
system:playback_2
system:playback_3
system:playback_4
system:playback_5
system:playback_6
system:playback_7
system:playback_8
SuperCollider:in_1
SuperCollider:in_2
SuperCollider:in_3
SuperCollider:in_4
SuperCollider:in_5
SuperCollider:in_6
SuperCollider:in_7
SuperCollider:in_8
SuperCollider:out_1
SuperCollider:out_2
SuperCollider:out_3
SuperCollider:out_4
SuperCollider:out_5
SuperCollider:out_6
SuperCollider:out_7
SuperCollider:out_8
</pre>

	<p>The eight outputs of SuperCollider are not connected to any system's PCM device. This can be done using <em>jack_connect</em> or a tool called <em>qjackctl</em> (Ubuntu package: <em>qjackctl</em>). Each time scsynth is closed, connection topology is lost.</p>


	<p>There is also a neater way to make connection by default, using environmental variables:</p>


<pre>
$ export SC_JACK_DEFAULT_OUTPUTS="alsa_pcm:playback_1,alsa_pcm:playback_2" 
</pre>

	<p>This one connects the first two outputs of SuperCollider to the first two system's PCM devices. Each comma gets a new SuperCollider output, sequentially, basing on the availability of the audio subsystem.</p>


	<p>Starting up again scsynth should give this message:</p>


<pre>
JackDriver: client name is 'SuperCollider'
JackDriver: max output latency 23.2 ms
JackDriver: connected  SuperCollider:out_1 to alsa_pcm:playback_1
JackDriver: max output latency 23.2 ms
JackDriver: connected  SuperCollider:out_2 to alsa_pcm:playback_2
SuperCollider 3 server ready..
</pre>

	<p>And jack_lsp:</p>


<pre>
---SNIP---
SuperCollider:out_1
   system:playback_1
SuperCollider:out_2
   system:playback_2
---SNIP---
</pre>

	<a name="EmacsSClang-test"></a>
<h1 >Emacs+SClang test<a href="#EmacsSClang-test" class="wiki-anchor">&para;</a></h1>


	<p>If SCEL has been selected among SuperCollider installation profile, just paste this snippet on <code>~/.emacs</code>:</p>


<pre>
(require 'sclang)
</pre>

	<p>Then launch emacs with:</p>


<pre>
$ emacs -sclang
</pre>

	<p>Be sure to have an SCLang menu on Emacs menu bar. Remember that you can get out of Emacs mess using Ctrl-X Ctrl-C, that lines are evaluated with Ctrl-C Ctrl-C and blocks with Ctrl-C Ctrl-X</p>


	<a name="More-tests"></a>
<h1 >More tests<a href="#More-tests" class="wiki-anchor">&para;</a></h1>


	<p>Jack utils offers also an interesting tool which is called scope:</p>


<pre>
$ jack.scope
</pre>

	<p>Inputs of the scope must be connected manually. Use qjackctl or jack_connect to do that, once scsynth is up and running.</p>


	<a name="Avoid-Jack"></a>
<h1 >Avoid Jack<a href="#Avoid-Jack" class="wiki-anchor">&para;</a></h1>


	<p>If you need for some reason to avoid Jack API, it's possible to use Portaudio API:</p>


<pre>
$ sudo apt-get install portaudio19-dev
$ scons AUDIOAPI=portaudio build
</pre>

	<p>For SuperCollider 3.2, whenever this command ends up with this error:</p>


<pre>
Source/server/SC_CoreAudio.cpp: In function 'int64 GetCurrentOSCTime()':
Source/server/SC_CoreAudio.cpp:140: error: 'gettimeofday' was not declared in this scope
</pre>

	<p>apply the following patch to the source tree:</p>


<pre>
--- Source/server/SC_CoreAudio.cpp    2008-02-19 23:47:22.000000000 +0100
+++ Source/server/SC_CoreAudio.cpp    2008-08-19 11:07:10.000000000 +0200
@@ -29,6 +29,7 @@
 #include "SC_Lib_Cintf.h" 
 #include &lt;stdlib.h&gt;
 #include &lt;pthread.h&gt;
+#include &lt;sys/time.h&gt;

 #ifdef SC_WIN32
 #include "SC_Win32Utils.h" 
@@ -1955,4 +1956,4 @@
 {
 }

-#endif // SC_AUDIO_API_INNERSC_VST
\ No newline at end of file
+#endif // SC_AUDIO_API_INNERSC_VST
</pre>

	<p>If you need to know how to do that, simply change in the Supercollider-Source directory and:</p>


<pre>
$ patch -p0
</pre>

	<p>Pasting the contents of the proposed patch, then run again the build.</p>


	<a name="Final-notes"></a>
<h1 >Final notes<a href="#Final-notes" class="wiki-anchor">&para;</a></h1>


	<ul>
	<li>One common pitfall is when jack applications are executed with different users (e.g.: launching scsynth or emacs using sudo). So be aware to be homogeneous. If you need realtime priority under ubuntu, use limits.conf (more info <a class="external" href="https://help.ubuntu.com/community/UbuntuStudioPreparation">https://help.ubuntu.com/community/UbuntuStudioPreparation</a> here and <a class="external" href="https://help.ubuntu.com/community/UbuntuStudioPreparation">https://help.ubuntu.com/community/UbuntuStudioPreparation</a> here</li>
		<li>SuperCollider can get realtime scheduling priority only with super user grants</li>
	</ul>


	<p></p>
</div>














        
        <div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>


</div>
</div>
<script type="text/javascript">
//<![CDATA[
wiki_extension_create_table_header();
//]]>
</script>
</body>

<!-- Mirrored from www.libavg.de/site/projects/libavg/wiki/SponcSupercollider by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Jan 2025 18:11:23 GMT -->
</html>
